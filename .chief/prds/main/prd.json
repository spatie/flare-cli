{
  "project": "Flare CLI",
  "description": "A standalone command-line tool for Flare, Spatie's error tracking and performance monitoring service. It lets developers interact with the Flare REST API from the terminal — listing projects and errors, resolving/snoozing errors, viewing error occurrences, and managing teams. Built on Laravel Zero using spatie/laravel-openapi-cli to auto-generate artisan commands from the Flare OpenAPI spec.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Project scaffolding and dependency setup",
      "description": "As a developer, I want the Laravel Zero project properly configured with the correct package identity, dependencies, and local development setup so that I can build and test the CLI.",
      "acceptanceCriteria": [
        "composer.json updated: name set to spatie/flare-cli, description, keywords, authors, homepage reflect Flare/Spatie",
        "PHP requirement raised to ^8.4 (to match spatie/laravel-openapi-cli requirement)",
        "composer.json has a repositories entry with type: path pointing to ../laravel-openapi-cli with symlink: true",
        "spatie/laravel-openapi-cli: * added to require",
        "spatie/laravel-package-tools is pulled in transitively (no manual require needed)",
        "composer update succeeds and vendor/spatie/laravel-openapi-cli is a symlink to the local package",
        "The InspireCommand example command is removed",
        "The example test InspireCommandTest is removed",
        "config/app.php updated: name set to 'Flare'",
        "Binary entry point renamed from flare-cli to flare (file at project root), bin field in composer.json updated to [\"flare\"]"
      ],
      "priority": 1,
      "passes": true,
      "inProgress": false
    },
    {
      "id": "US-002",
      "title": "Credential storage",
      "description": "As a developer, I want a credential storage service that reads and writes my Flare API token to ~/.flare/config.json so that the CLI can persist my authentication across sessions.",
      "acceptanceCriteria": [
        "A CredentialStore class exists at app/Services/CredentialStore.php",
        "It stores credentials in ~/.flare/config.json (using $_SERVER['HOME'] with $_SERVER['USERPROFILE'] fallback for Windows)",
        "ensureConfigDirectoryExists() creates ~/.flare/ with 0755 permissions if it doesn't exist",
        "getToken(): ?string reads the stored API token (returns null if no file or no token key)",
        "setToken(string $token): void writes the token to the JSON file",
        "flush(): void clears all stored credentials (writes {} to the file)",
        "The class is registered as a singleton in AppServiceProvider",
        "The JSON file uses pretty-print formatting for human readability"
      ],
      "priority": 2,
      "passes": true,
      "inProgress": false
    },
    {
      "id": "US-003",
      "title": "Login command",
      "description": "As a developer, I want to run flare login to store my Flare API token so that I can authenticate all subsequent API commands.",
      "acceptanceCriteria": [
        "A LoginCommand exists at app/Commands/LoginCommand.php",
        "Command signature is login",
        "Prompts the user to paste their API token (using $this-\u003esecret() to hide input)",
        "Validates the token by calling GET https://flareapp.io/api/me with the provided token as a Bearer token",
        "On success: stores the token via CredentialStore::setToken(), displays \"Logged in as {name}\" using the name from the API response",
        "On failure (non-2xx response): shows an error message (\"Invalid API token.\"), does NOT store the token",
        "On network error: shows a connection error message",
        "Uses Laravel's Http facade for the validation request"
      ],
      "priority": 3,
      "passes": true,
      "inProgress": false
    },
    {
      "id": "US-004",
      "title": "Logout command",
      "description": "As a developer, I want to run flare logout to clear my stored credentials.",
      "acceptanceCriteria": [
        "A LogoutCommand exists at app/Commands/LogoutCommand.php",
        "Command signature is logout",
        "Calls CredentialStore::flush() to clear stored credentials",
        "Displays a confirmation message: \"Logged out successfully.\""
      ],
      "priority": 4,
      "passes": true,
      "inProgress": false
    },
    {
      "id": "US-005",
      "title": "OpenAPI spec bundling",
      "description": "As a developer, I want the Flare OpenAPI spec YAML file bundled inside the application so that the openapi-cli package can read it at runtime (including from within a PHAR).",
      "acceptanceCriteria": [
        "The Flare OpenAPI spec exists at resources/openapi/flare-api.yaml",
        "The spec is a copy of the file from /Users/alex/Projects/flareapp.io/public/downloads/flare-api.yaml",
        "box.json updated to include \"resources\" in the directories array (required for PHAR bundling)",
        "resource_path('openapi/flare-api.yaml') resolves correctly both in development and inside a PHAR"
      ],
      "priority": 5,
      "passes": true,
      "inProgress": false
    },
    {
      "id": "US-006",
      "title": "OpenAPI command registration",
      "description": "As a developer, I want all Flare API endpoints automatically registered as artisan commands so that I can interact with every endpoint from the CLI.",
      "acceptanceCriteria": [
        "Spatie\\OpenApiCli\\OpenApiCliServiceProvider is manually registered in config/app.php providers array (Laravel Zero disables package auto-discovery)",
        "In AppServiceProvider::boot(), OpenApiCli::register() is called with the spec path, 'flare' prefix, base URL, operation ID mode, auth callable, and banner",
        "Uses .useOperationIds() so commands are named from operationId fields (e.g., flare:list-projects, flare:resolve-error)",
        "Uses .auth() with a closure that reads the token from CredentialStore — this evaluates lazily per-request",
        "Running flare flare:list shows all available API commands",
        "The following commands are registered from the spec's operationIds: flare:get-authenticated-user, flare:list-projects, flare:create-project, flare:delete-project, flare:list-project-errors, flare:get-project-error-count, flare:get-project-error-occurrence-count, flare:list-error-occurrences, flare:get-error-occurrence, flare:resolve-error, flare:unresolve-error, flare:snooze-error, flare:unsnooze-error, flare:get-team, flare:remove-team-user, flare:list"
      ],
      "priority": 6,
      "passes": true
    },
    {
      "id": "US-007",
      "title": "Branded banner for flare:list",
      "description": "As a developer, I want to see a branded Flare ASCII art banner when I run flare flare:list so that the CLI feels polished and professional.",
      "acceptanceCriteria": [
        "The flare:list command displays an ASCII \"FLARE\" banner with a gradient color scheme before the endpoint list",
        "A tagline bar is displayed below the banner: \"\\u2726 Catch errors. Fix slowdowns. :: flareapp.io \\u2726\"",
        "The banner uses the callable form of .banner() (receives the $command instance)",
        "The banner only appears in the flare:list output, not individual endpoint commands (this is handled by the openapi-cli package automatically)"
      ],
      "priority": 7,
      "passes": true,
      "inProgress": false
    },
    {
      "id": "US-008",
      "title": "PHAR build and distribution setup",
      "description": "As a maintainer, I want the project configured for PHAR building and Composer global distribution so that users can install the CLI with composer global require spatie/flare-cli.",
      "acceptanceCriteria": [
        "box.json includes \"resources\" in directories array (for the OpenAPI spec YAML)",
        "Running php flare app:build flare produces a working PHAR in builds/flare",
        "The built PHAR can execute login, logout, flare:list, and API commands correctly",
        "For Packagist distribution: composer.json should eventually have laravel-zero/framework in require-dev (not require) and bin pointing to [\"builds/flare\"] — but this change is only for the release branch/process, not for development",
        "The repositories path entry (for local openapi-cli dev) should be removed before publishing to Packagist"
      ],
      "priority": 8,
      "passes": true,
      "inProgress": false
    },
    {
      "id": "US-009",
      "title": "Tests",
      "description": "As a developer, I want integration tests covering the core CLI functionality so that I can catch regressions.",
      "acceptanceCriteria": [
        "Tests use Pest (already configured in the project)",
        "tests/Feature/LoginCommandTest.php: test successful login stores credentials, test invalid token shows error and doesn't store, test network error shows connection message",
        "tests/Feature/LogoutCommandTest.php: test logout clears stored credentials and shows confirmation",
        "tests/Feature/CredentialStoreTest.php: test read/write/flush cycle using a temp directory (override the path in tests)",
        "tests/Feature/UnauthenticatedCommandTest.php: test that running an API command without stored credentials shows the \"run `flare login`\" message and exits with non-zero code",
        "tests/Feature/CommandRegistrationTest.php: smoke test that key commands are registered and discoverable (e.g., flare:list-projects, flare:resolve-error, flare:list exist as artisan commands)",
        "tests/Feature/BannerTest.php: test that flare:list output contains expected banner text elements (e.g., the tagline string)",
        "All tests use Http::fake() for API calls",
        "Tests that touch credential storage use a temp directory (not the real ~/.flare)"
      ],
      "priority": 9,
      "passes": true,
      "inProgress": false
    }
  ]
}
